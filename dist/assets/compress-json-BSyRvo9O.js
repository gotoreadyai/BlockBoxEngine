function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var t={},n={},r={};function o(e){return Object.prototype.toString.call(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.throwUnsupportedData=r.throwUnknownDataType=r.getType=void 0,r.getType=o,r.throwUnknownDataType=function(e){throw new TypeError("unsupported data type: "+o(e))},r.throwUnsupportedData=function(e){throw new TypeError("unsupported data type: "+e)};var c={},u={};Object.defineProperty(u,"__esModule",{value:!0}),u.s_to_num=u.int_str_to_s=u.num_to_s=u.big_int_to_s=u.int_to_s=u.s_to_big_int=u.s_to_int=void 0;let i="";for(let A=0;A<10;A++){const e=String.fromCharCode(48+A);i+=e}for(let A=0;A<26;A++){const e=String.fromCharCode(65+A);i+=e}for(let A=0;A<26;A++){const e=String.fromCharCode(97+A);i+=e}const s=i.length,a={};for(let A=0;A<s;A++){const e=i[A];a[e]=A}function d(e){let t=0,n=1;for(let r=e.length-1;r>=0;r--){const o=e[r];let c=a[o];c*=n,t+=c,n*=s}return t}function f(e){let t=BigInt(0),n=BigInt(1);const r=BigInt(s);for(let o=e.length-1;o>=0;o--){const c=e[o];let u=BigInt(a[c]);u*=n,t+=u,n*=r}return t}function l(e){if(0===e)return i[0];const t=[];for(;0!==e;){const n=e%s,r=i[n];t.push(r),e-=n,e/=s}return t.reverse().join("")}function m(e){const t=BigInt(0),n=BigInt(s);if(e===t)return i[0];const r=[];for(;e!==t;){const t=i[Number(e%n)];r.push(t),e/=n}return r.reverse().join("")}function _(e){return e.split("").reverse().join("")}function p(e){const t=+e;return t.toString()===e&&t+1!==t&&t-1!==t?l(t):":"+m(BigInt(e))}function y(e){return":"===e[0]?f(e.substring(1)).toString():d(e).toString()}u.s_to_int=d,u.s_to_big_int=f,u.int_to_s=l,u.big_int_to_s=m,u.num_to_s=function e(t){if(t<0)return"-"+e(-t);let n,[r,o]=t.toString().split(".");if(!o)return l(t);o&&([o,n]=o.split("e")),r=p(r),o=_(o),o=p(o);let c=r+"."+o;if(n){switch(c+=".",n[0]){case"+":n=n.slice(1);break;case"-":c+="-",n=n.slice(1)}n=p(n),c+=n}return c},u.int_str_to_s=p,u.s_to_num=function e(t){if("-"===t[0])return-e(t.substr(1));let[n,r,o]=t.split(".");if(!r)return d(n);n=y(n),r=y(r),r=_(r);let c=n+"."+r;if(o){c+="e";let e=!1;"-"===o[0]&&(e=!0,o=o.slice(1)),o=y(o),c+=e?-o:+o}return+c},Object.defineProperty(c,"__esModule",{value:!0}),c.decodeStr=c.encodeStr=c.decodeBool=c.encodeBool=c.decodeKey=c.decodeNum=c.encodeNum=void 0;const b=u;c.encodeNum=function(e){return"n|"+(0,b.num_to_s)(e)},c.decodeNum=function(e){return e=e.replace("n|",""),(0,b.s_to_num)(e)},c.decodeKey=function(e){return"number"==typeof e?e:(0,b.s_to_int)(e)},c.encodeBool=function(e){return e?"b|T":"b|F"},c.decodeBool=function(e){switch(e){case"b|T":return!0;case"b|F":return!1}return!!e},c.encodeStr=function(e){switch(e[0]+e[1]){case"b|":case"o|":case"n|":case"a|":case"s|":e="s|"+e}return e},c.decodeStr=function(e){return"s|"===e[0]+e[1]?e.substr(2):e};var h={},g={};Object.defineProperty(g,"__esModule",{value:!0}),g.config=void 0,g.config={sort_key:!1,error_on_nan:!1,error_on_infinite:!1},Object.defineProperty(h,"__esModule",{value:!0}),h.addValue=h.makeInMemoryMemory=h.makeInMemoryCache=h.makeInMemoryStore=h.memToValues=void 0;const v=g,j=r,w=c,S=u;function I(){const e=[];return{forEach(t){for(let n=0;n<e.length;n++)if("break"===t(e[n]))return},add(t){e.push(t)},toArray:()=>e}}function O(){const e=Object.create(null),t=Object.create(null);return{getValue:t=>e[t],getSchema:e=>t[e],forEachValue(t){for(const[n,r]of Object.entries(e))if("break"===t(n,r))return},forEachSchema(e){for(const[n,r]of Object.entries(t))if("break"===e(n,r))return},setValue(t,n){e[t]=n},setSchema(e,n){t[e]=n},hasValue:t=>t in e,hasSchema:e=>e in t}}function k(e,t){if(e.cache.hasValue(t))return e.cache.getValue(t);const n=e.keyCount++,r=(0,S.num_to_s)(n);return e.store.add(t),e.cache.setValue(t,r),r}function M(e,t,n){if(null===t)return"";switch(typeof t){case"undefined":if(Array.isArray(n))return M(e,null,n);break;case"object":if(null===t)return k(e,null);if(Array.isArray(t)){let n="a";for(let r=0;r<t.length;r++){const o=t[r];n+="|"+(null===o?"_":M(e,o,t))}return"a"===n&&(n="a|"),k(e,n)}{const n=Object.keys(t);if(0===n.length)return k(e,"o|");let r="o";const o=function(e,t){v.config.sort_key&&t.sort();const n=t.join(",");if(e.cache.hasSchema(n))return e.cache.getSchema(n);const r=M(e,t,void 0);return e.cache.setSchema(n,r),r}(e,n);r+="|"+o;for(const c of n){r+="|"+M(e,t[c],t)}return k(e,r)}case"boolean":return k(e,(0,w.encodeBool)(t));case"number":return Number.isNaN(t)?(v.config.error_on_nan&&(0,j.throwUnsupportedData)("[number NaN]"),""):Number.POSITIVE_INFINITY===t||Number.NEGATIVE_INFINITY===t?(v.config.error_on_infinite&&(0,j.throwUnsupportedData)("[number Infinity]"),""):k(e,(0,w.encodeNum)(t));case"string":return k(e,(0,w.encodeStr)(t))}return(0,j.throwUnknownDataType)(t)}h.memToValues=function(e){return e.store.toArray()},h.makeInMemoryStore=I,h.makeInMemoryCache=O,h.makeInMemoryMemory=function(){return{store:I(),cache:O(),keyCount:0}},h.addValue=M,Object.defineProperty(n,"__esModule",{value:!0}),n.decompress=n.decode=n.compress=void 0;const N=r,U=c,V=h;function P(e,t){if(""===t||"_"===t)return null;const n=e[(0,U.decodeKey)(t)];if(null===n)return n;switch(typeof n){case"undefined":case"number":return n;case"string":switch(n[0]+n[1]){case"b|":return(0,U.decodeBool)(n);case"o|":return function(e,t){if("o|"===t)return{};const n={},r=t.split("|");let o=P(e,r[1]);const c=r.length;c-2!=1||Array.isArray(o)||(o=[o]);for(let u=2;u<c;u++){const t=o[u-2];let c=r[u];c=P(e,c),n[t]=c}return n}(e,n);case"n|":return(0,U.decodeNum)(n);case"a|":return function(e,t){if("a|"===t)return[];const n=t.split("|"),r=n.length-1,o=new Array(r);for(let c=0;c<r;c++){let t=n[c+1];t=P(e,t),o[c]=t}return o}(e,n);default:return(0,U.decodeStr)(n)}}return(0,N.throwUnknownDataType)(n)}n.compress=function(e){const t=(0,V.makeInMemoryMemory)(),n=(0,V.addValue)(t,e,void 0);return[(0,V.memToValues)(t),n]},n.decode=P,n.decompress=function(e){const[t,n]=e;return P(t,n)};var T={};function B(e,t){t.add(e);for(const n in e)if(void 0===e[n])delete e[n];else{const r=e[n];r&&"object"==typeof r&&!t.has(r)&&B(r,t)}}Object.defineProperty(T,"__esModule",{value:!0}),T.trimUndefinedRecursively=T.trimUndefined=void 0,T.trimUndefined=function(e){for(const t in e)void 0===e[t]&&delete e[t]},T.trimUndefinedRecursively=function(e){B(e,new Set)},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.config=e.trimUndefinedRecursively=e.trimUndefined=e.addValue=e.decode=e.decompress=e.compress=void 0;var t=n;Object.defineProperty(e,"compress",{enumerable:!0,get:function(){return t.compress}}),Object.defineProperty(e,"decompress",{enumerable:!0,get:function(){return t.decompress}});var r=n;Object.defineProperty(e,"decode",{enumerable:!0,get:function(){return r.decode}});var o=h;Object.defineProperty(e,"addValue",{enumerable:!0,get:function(){return o.addValue}});var c=T;Object.defineProperty(e,"trimUndefined",{enumerable:!0,get:function(){return c.trimUndefined}}),Object.defineProperty(e,"trimUndefinedRecursively",{enumerable:!0,get:function(){return c.trimUndefinedRecursively}});var u=g;Object.defineProperty(e,"config",{enumerable:!0,get:function(){return u.config}})}(t);export{t as d,e as g};
